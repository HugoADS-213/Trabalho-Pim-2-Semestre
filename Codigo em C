#include <stdio.h>


void gerarRelatorio(char *nomeArquivo) {
    FILE *arq = fopen(nomeArquivo, "r");
    if (arq == NULL) {
        printf("\nErro: nao foi possivel abrir o arquivo %s\n", nomeArquivo);
        return;
    }

    char linha[256];
    char disciplina[100], nome[100], ra[30], turma[30];
    char nota1[10], nota2[10], nota3[10], media[10];

    // Lê e descarta a primeira linha (cabeçalho)
    fgets(linha, sizeof(linha), arq);

    printf("\nRELATORIO: %s\n", nomeArquivo);
    printf("--------------------------------------------------------------------------------\n");
    printf("%-45s %-8s %-8s %-8s %-8s %-8s %-8s\n",
           "Nome", "RA", "Turma", "Nota1", "Nota2", "Nota3", "Media");
    printf("--------------------------------------------------------------------------------\n");

    while (fgets(linha, sizeof(linha), arq)) {
        // Quebra a linha CSV nos campos esperados
        sscanf(linha, "%99[^,],%99[^,],%29[^,],%29[^,],%9[^,],%9[^,],%9[^,],%9s",
               disciplina, nome, ra, turma, nota1, nota2, nota3, media);

        printf("%-45s %-8s %-8s %-8s %-8s %-8s %-8s\n",
               nome, ra, turma, nota1, nota2, nota3, media);
    }

    fclose(arq);
}

int main() {
    int opcao;
    do {
        printf("\n===== MENU RELATORIOS =====\n");
        printf("1 - Algoritmos e Estrutura de Dados em Python\n");
        printf("2 - Programacao Estruturada em C\n");
        printf("3 - Analise e Projeto de Sistemas\n");
        printf("4 - Engenharia de Software Agil\n");
        printf("0 - Sair\n");
        printf("Escolha a disciplina: ");
        scanf("%d", &opcao);
        getchar(); // limpa buffer do teclado

        switch(opcao) {
            case 1: gerarRelatorio("Local Do Arquivo no Computador");
                break;
            case 2: gerarRelatorio("Local Do Arquivo no Computador");
                break;
            case 3:
                gerarRelatorio("Local Do Arquivo no Computador");
                break;
            case 4:
                gerarRelatorio("Local Do Arquivo no Computador");
                break;
            case 0:
                printf("\nEncerrando o programa...\n");
                break;
            default:
                printf("\nOpcao invalida!\n");
        }
    } while(opcao != 0);

    return 0;
}
